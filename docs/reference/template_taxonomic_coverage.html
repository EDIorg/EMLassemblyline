<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create taxonomic coverage template — template_taxonomic_coverage • EMLassemblyline</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create taxonomic coverage template — template_taxonomic_coverage" />
<meta property="og:description" content="Use this function to extract the unique taxa of a data table and 
    try to resolve (match) to a taxonomic authority system (e.g. 
    ITIS) and return for user supplied 
    inputs if necessary. This information is later used to list the full
    hierarchical rank names in the metadata.
    Instructions for editing this template." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">EMLassemblyline</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.19.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/overview.html">Overview</a>
    </li>
    <li>
      <a href="../articles/organize_data_package.html">Organize data package</a>
    </li>
    <li>
      <a href="../articles/create_metadata_templates.html">Create metadata templates</a>
    </li>
    <li>
      <a href="../articles/edit_metadata_templates.html">Edit metadata templates</a>
    </li>
    <li>
      <a href="../articles/create_eml.html">Make EML</a>
    </li>
    <li>
      <a href="../articles/publish_data_package.html">Publish data package</a>
    </li>
    <li>
      <a href="../articles/automate_data_publication.html">Automate data publication</a>
    </li>
    <li>
      <a href="../articles/emlassemblyline_via_exchange_format.html">Use EMLassemblyline via exchange format</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/EDIorg/EMLassemblyline/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create taxonomic coverage template</h1>
    <small class="dont-index">Source: <a href='https://github.com/EDIorg/EMLassemblyline/blob/master/R/template_taxonomic_coverage.R'><code>R/template_taxonomic_coverage.R</code></a></small>
    <div class="hidden name"><code>template_taxonomic_coverage.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Use this function to extract the unique taxa of a data table and 
    try to resolve (match) to a taxonomic authority system (e.g. 
    <a href='https://www.itis.gov/'>ITIS</a>) and return for user supplied 
    inputs if necessary. This information is later used to list the full
    hierarchical rank names in the metadata.
    <a href='https://ediorg.github.io/EMLassemblyline/articles/edit_metadata_templates.html'>Instructions for editing this template.</a></p>
    </div>

    <pre class="usage"><span class='fu'>template_taxonomic_coverage</span>(
      <span class='no'>path</span>,
      <span class='kw'>data.path</span> <span class='kw'>=</span> <span class='no'>path</span>,
      <span class='no'>taxa.table</span>,
      <span class='no'>taxa.col</span>,
      <span class='no'>taxa.name.type</span>,
      <span class='no'>taxa.authority</span>,
      <span class='kw'>write.file</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
      <span class='kw'>x</span> <span class='kw'>=</span> <span class='kw'>NULL</span>
    )</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>path</th>
      <td><p>(character) Path to the metadata template directory.</p></td>
    </tr>
    <tr>
      <th>data.path</th>
      <td><p>(character) Path to the data directory.</p></td>
    </tr>
    <tr>
      <th>taxa.table</th>
      <td><p>(character) Table name containing <code>taxa.col</code>. If inputting more 
than one table, then supply as a list (e.g. 
<code><a href='https://rdrr.io/r/base/c.html'>c('table.1', 'table.2')</a></code>).</p></td>
    </tr>
    <tr>
      <th>taxa.col</th>
      <td><p>(character) Column name containing taxa names. Species binomials are
accepted. If inputting more than one table, then supply as a list
<code><a href='https://rdrr.io/r/base/c.html'>c('taxa.col.table.1', 'taxa.col.table.2')</a></code>.</p></td>
    </tr>
    <tr>
      <th>taxa.name.type</th>
      <td><p>(character) Taxa name type. Can be: 
<code>scientific</code>, <code>common</code>, or <code>both</code>.</p></td>
    </tr>
    <tr>
      <th>taxa.authority</th>
      <td><p>(integer) Taxonomic authorities to resolve to as an ordered numeric vector 
of ID's decreasing in preference. See the list of supported authorities 
with <code><a href='https://rdrr.io/pkg/taxonomyCleanr/man/view_taxa_authorities.html'>taxonomyCleanr::view_taxa_authorities()</a></code>. Columns 
"resolve_sci_taxa", and "resolve_comm_taxa" list authorites supporting 
scientific and common searches, respectively.</p></td>
    </tr>
    <tr>
      <th>write.file</th>
      <td><p>(logical; optional) Whether to write the template file.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>(named list; optional) Alternative input to 
<code>template_taxonomic_coverage()</code>. Use <code><a href='template_arguments.html'>template_arguments()</a></code> 
to create <code>x</code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><strong>taxonomic_coverage.txt</strong> The tab delimited taxonomic coverage 
    template. This file is written to <code>path</code> unless using <code>x</code>,
    in which case the template is added to 
    <strong>/x/templates/taxonomic_coverage.txt</strong>. Non-resolved taxa result 
    NA.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>template_taxonomic_coverage()</code> searches the most preferred 
    taxonomic authority for all unique taxa listed in <code>taxa.col</code> 
    returning the authority name and corresponding taxa identifier for 
    direct matches (no fuzzy searching), then the next most preferred 
    taxonomic authority is search for taxa that have not yet been resolved. 
    This process repeats for subsequently listed authorities. "NA" is 
    returned when an authority match is not made.</p>    
<p>When taxonomic_coverage.txt is passed to <code><a href='make_eml.html'>make_eml()</a></code>, the 
    authority information is used to get the hierarchical rank names of 
    resolved taxa and rendered into the "taxonomicCoverage" element of EML.</p>    
<p>Existing taxonomic_coverage.txt will not be overwritten by subsequent 
    calls to <code>template_taxonomic_coverage()</code>.</p>    
<p>Character encoding of metadata extracted directly from the tables are 
    converted to UTF-8 via <code><a href='https://rdrr.io/r/base/Encoding.html'>enc2utf8()</a></code>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Initialize data package directory for template_taxonomic_coverage()</span>
<span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.copy</a></span>(
  <span class='kw'>from</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>'/examples/pkg_255'</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>'EMLassemblyline'</span>),
  <span class='kw'>to</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span>(),
  <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</div><div class='output co'>#&gt; [1] TRUE</div><div class='input'>
<span class='co'># Set working directory</span>
<span class='fu'><a href='https://rdrr.io/r/base/getwd.html'>setwd</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span>(), <span class='st'>'/pkg_255'</span>))

<span class='co'># View directory contents (NOTE: taxonomic_coverage.txt doesn't exist)</span>
<span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>dir</a></span>(<span class='st'>'./metadata_templates'</span>)</div><div class='output co'>#&gt;  [1] "abstract.txt"            "additional_info.txt"    
#&gt;  [3] "attributes_decomp.txt"   "attributes_nitrogen.txt"
#&gt;  [5] "catvars_decomp.txt"      "catvars_nitrogen.txt"   
#&gt;  [7] "custom_units.txt"        "geographic_coverage.txt"
#&gt;  [9] "intellectual_rights.txt" "keywords.txt"           
#&gt; [11] "methods.txt"             "personnel.txt"          </div><div class='input'>
<span class='co'># Template taxonomic coverage</span>
<span class='fu'>template_taxonomic_coverage</span>(
  <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>'./metadata_templates'</span>,
  <span class='kw'>data.path</span> <span class='kw'>=</span> <span class='st'>'./data_objects'</span>,
  <span class='kw'>taxa.table</span> <span class='kw'>=</span> <span class='st'>'decomp.csv'</span>,
  <span class='kw'>taxa.col</span> <span class='kw'>=</span> <span class='st'>'taxa'</span>,
  <span class='kw'>taxa.authority</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>3</span>,<span class='fl'>11</span>),
  <span class='kw'>taxa.name.type</span> <span class='kw'>=</span> <span class='st'>'scientific'</span>
)</div><div class='output co'>#&gt; <span class='message'>Templating taxonomic coverage ...</span></div><div class='output co'>#&gt; <span class='message'>Searching ITIS for "Mosses"</span></div><div class='output co'>#&gt; <span class='message'>Searching GBIF Backbone Taxonomy for "Mosses"</span></div><div class='output co'>#&gt; <span class='message'>Searching ITIS for "Unsorted biomass"</span></div><div class='output co'>#&gt; <span class='message'>Searching GBIF Backbone Taxonomy for "Unsorted biomass"</span></div><div class='output co'>#&gt; <span class='message'>Searching ITIS for "Achillea millefolium"</span></div><div class='output co'>#&gt; <span class='message'>Searching ITIS for "Bouteloua gracilis"</span></div><div class='output co'>#&gt; <span class='message'>Searching ITIS for "Cyperus"</span></div><div class='output co'>#&gt; <span class='message'>Searching ITIS for "Koeleria cristata"</span></div><div class='output co'>#&gt; <span class='message'>Searching ITIS for "Lespedeza capitata"</span></div><div class='output co'>#&gt; <span class='message'>Searching GBIF Backbone Taxonomy for "Lespedeza capitata"</span></div><div class='output co'>#&gt; <span style='color: #0000BB;'>==</span><span>  db: gbif </span><span style='color: #0000BB;'>=================</span><span></div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Retrieving data for taxon 'Lespedeza capitata'</span></div><div class='output co'>#&gt; <span class='message'>Searching ITIS for "Liatris aspera"</span></div><div class='output co'>#&gt; <span class='message'>taxonomic_coverage.txt</span></div><div class='output co'>#&gt; <span class='message'>Done.</span></div><div class='input'>
<span class='co'># View directory contents (NOTE: taxonomic_coverage.txt exists)</span>
<span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>dir</a></span>(<span class='st'>'./metadata_templates'</span>)</div><div class='output co'>#&gt;  [1] "abstract.txt"            "additional_info.txt"    
#&gt;  [3] "attributes_decomp.txt"   "attributes_nitrogen.txt"
#&gt;  [5] "catvars_decomp.txt"      "catvars_nitrogen.txt"   
#&gt;  [7] "custom_units.txt"        "geographic_coverage.txt"
#&gt;  [9] "intellectual_rights.txt" "keywords.txt"           
#&gt; [11] "methods.txt"             "personnel.txt"          
#&gt; [13] "taxonomic_coverage.txt" </div><div class='input'>
<span class='co'># Rerunning template_taxonomic_coverage() does not overwrite file</span>
<span class='fu'>template_taxonomic_coverage</span>(
  <span class='kw'>path</span> <span class='kw'>=</span> <span class='st'>'./metadata_templates'</span>,
  <span class='kw'>data.path</span> <span class='kw'>=</span> <span class='st'>'./data_objects'</span>,
  <span class='kw'>taxa.table</span> <span class='kw'>=</span> <span class='st'>'decomp.csv'</span>,
  <span class='kw'>taxa.col</span> <span class='kw'>=</span> <span class='st'>'taxa'</span>,
  <span class='kw'>taxa.authority</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>3</span>,<span class='fl'>11</span>),
  <span class='kw'>taxa.name.type</span> <span class='kw'>=</span> <span class='st'>'scientific'</span>
)</div><div class='output co'>#&gt; <span class='message'>Templating taxonomic coverage ...</span></div><div class='output co'>#&gt; <span class='message'>taxonomic_coverage.txt already exists!</span></div><div class='output co'>#&gt; <span class='message'>Done.</span></div><div class='input'>
<span class='co'># Clean up</span>
<span class='fu'><a href='https://rdrr.io/r/base/unlink.html'>unlink</a></span>(<span class='st'>'.'</span>, <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Colin Smith.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


